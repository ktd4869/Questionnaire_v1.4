<p id=p0><span class='token pointer' id='tok-82-0' style='color:red'>Cloudflare</span>has an automatic <span class='token pointer' id='tok-82-1' style='color:red'>optimization</span><span class='token pointer' id='tok-82-2' style='color:red'>image</span>called Polish, available to customers on paid plans.  It <span class='token pointer' id='tok-82-3' style='color:red'>recompresses</span>images and removes unnecessary data so that they are delivered to browsers more quickly. </p><p id=p32>Up until now, Polish has not changed image types when optimizing (even if, for example, a <span class='token pointer' id='tok-82-4' style='color:red'>PNG</span>might sometimes have been smaller than the equivalent <span class='token pointer' id='tok-82-5' style='color:red'>JPEG).</span>But a new feature in Polish allows us to swap out an image for an equivalent image compressed using Google's <span class='token pointer' id='tok-82-6' style='color:red'>WebP</span>format when the browser is capable of handling WebP and delivering that type of image would be quicker. </p><p id=p97>CC-BY 2.0 image by John Stratford </p><p id=p103>What is WebP?The main image formats used on the <span class='token pointer' id='tok-82-7' style='color:red'>web</span>haven't changed much since the early days <span class='token pointer' id='tok-82-8' style='color:red'>(apart</span>from the SVG vector format, PNG was the last one to establish itself, almost two decades ago). </p><p id=p138>WebP is a newer image format for the web, proposed by Google. It takes advantage of progress in image compression techniques since formats such as JPEG and PNG were designed. It is often able to compress the images into a significantly smaller amount of data than the older formats. </p><p id=p187>WebP is <span class='token pointer' id='tok-82-9' style='color:red'>versatile</span>and able to replace the three main <span class='token pointer' id='tok-82-10' style='color:red'>raster</span>image formats used on the web today: </p><p id=p205>WebP can do lossy compression, so it can be used instead of JPEG for photographic and photo-like images.WebP can do lossless compression, and supports an alpha channel meaning images can have transparent regions.  So it can be used instead of PNG, such as for images with sharp transitions that should be reproduced exactly (e.g. <span class='token pointer' id='tok-82-11' style='color:red'>line art</span>graphic design elements).WebP images can be <span class='token pointer' id='tok-82-12' style='color:red'>animated,</span>so it can be used as a replacement for animated GIF images.Currently the main browser that supports WebP is Google's Chrome (both on desktop and mobile devices).   See the WebP page on caniuse.com for more details. </p><p id=p308>Polish WebP conversionCustomers on the Pro, Business, and Enterprise plans can enable the automatic creation of WebP images by checking the WebP box in the Polish settings for a zone (these are found on the "Speed" page of the dashboard): </p><p id=p348>When this is enabled, Polish will optimize images just as it always has.  But it will also convert the image to WebP, if WebP can shrink the image data more than the original format. These WebP images are only returned to web browsers that indicate they support WebP (e.g. Google Chrome), so most websites using Polish should be able to benefit from WebP conversion. </p><p id=p413>(Although Polish can now produce WebP images by converting them from other formats, it can't consume WebP images to optimize them.  If you put a WebP image on an origin site, Polish won't do anything with it.  Until the WebP ecosystem grows and matures, it is uncertain that attempting to optimize WebP is worthwhile.) </p><p id=p469>Polish has two modes: lossless and lossy. In lossless mode, JPEG images are optimized to remove unnecessary data, but the image displayed is unchanged.  In lossy mode, Polish reduces the quality of JPEG images in a way that should not have a significant visible effect, but allows it to further reduce the size of the image data. </p><p id=p527>These modes are respected when JPEG images are converted to WebP. In lossless mode, the conversion is done in a way that preserves the image as faithfully as possible (due to the nature of the conversion, the resulting WebP might not be exactly identical, but there are unlikely to be any visible differences). In lossy mode, the conversion sacrifices a little quality in order to shrink the image data further, but as before, there should not be a significant visible effect. </p><p id=p608>These modes do not affect PNGs and GIFs, as these are lossless formats and so Polish will preserve images in those formats exactly. </p><p id=p631>Note that WebP conversion does not change the URLs of images, even if the file extension in the URL implies a different format. For example, a JPEG image at https://example.com/picture.jpg that has been converted to WebP will still have that same URL. The <span class='token pointer' id='tok-82-13' style='color:red'>"Content-Type" HTTP header</span>the browser the true format of an image. </p><p id=p686>By the Numbers A few studies have been published of how well WebP compresses images compared with established formats. These studies provide a useful picture of how WebP performs. But before we released our WebP support, we decided to do a survey based on the context on which we planned to use WebP: </p><p id=p739>We evaluated WebP based on a collection of images gathered from the websites of our customers. The corpus consisted of 23,500 images (JPEG, PNG and GIFs).Some studies compare WebP with JPEG by taking uncompressed images and compressing them to JPEG and WebP directly. But we wanted to know what happens when we convert an image that was has already been compressed as a JPEG. In a sense this is an unfair test, because a JPEG may contain artifacts due to compression that would not be present in the original raw image, and conversion to WebP may try to retain those artifacts. But it is such conversions matter for our use of WebP (this consideration does not apply to PNG and GIF conversions, because they are lossless). We're not just interested in whether WebP conversion can shrink images found on the web. We want to know how much WebP allows Polish to reduce the size further than it already does, thus providing a real end-user benefit. So our survey also includes the results of Polish without WebP. In some cases, converting to WebP does not produce a result smaller than the optimized image in the original format. In such cases, we discard the WebP image. So the figures presented below do not penalize WebP for such cases.Here is a chart showing the results of Polish, with and without WebP conversion. For each format, the average original image size is <span class='token pointer' id='tok-82-14' style='color:red'>normalized</span>to 100%, and the average sizes after Polishing are shown relative to that. </p><p id=p991>Here are the average savings: </p><p id=p996>Original <span class='token pointer' id='tok-82-15' style='color:red'>FormatPolish</span>without WebPPolish using WebPJPEG (with Polish lossless mode) <span class='token pointer' id='tok-82-16' style='color:red'>9%19%JPEG</span>(with Polish lossy <span class='token pointer' id='tok-82-17' style='color:red'>mode)34%47%PNG16%38%GIF3%16%(The</span>saving is calculated as 100% - (polished size) / (original size).) </p><p id=p1022>As you can see, WebP conversion achieves significant size improvements not only for JPEG images, but also for PNG and GIF images. We believe supporting WebP will result in lower bandwidth and faster website delivery. </p><p id=p1057>… and a WebP New YearWebP does not yet have the same level of browser support as JPEG, PNG and GIF, but we are excited about its potential to <span class='token pointer' id='tok-82-18' style='color:red'>streamline</span>web pages. Polish WebP conversion allows our customers to adopt WebP with a simple change to the settings in the Cloudflare dashboard.   So, if you are on one of our paid plans, we encourage you to try it out today. </p><p id=p1129>PS — Want to help optimize the web? We're hiring.
 </p>